import { Body, Query, Inject, Get, Post, Provide } from '@midwayjs/decorator';
import { CoolController, BaseController } from '@cool-midway/core';
import { BaseSysMenuEntity } from '../../../entity/sys/menu';
import { BaseSysMenuService } from '../../../service/sys/menu';

@Provide()
@CoolController({
api: ['add', 'delete', 'update', 'info', 'list', 'page'],
  entity: BaseSysMenuEntity,
  service: BaseSysMenuService,
})
export class BaseSysMenuController extends BaseController {
  @Inject()
  baseSysMenuService: BaseSysMenuService;

  @Post('/parse')
  async parse(
    @Body('entity') entity: string,
    @Body('controller') controller: string,
    @Body('module') module: string
  ) {

  }

  @Post('/create')
  async create(@Body() body) {
    await this.baseSysMenuService.create(body);
    return this.ok();
  }

  @Post('/export')
  async export(@Body('ids') ids: number[]) {
    return this.ok(await this.baseSysMenuService.export(ids));
  }

  @Post('/import')
  async import(@Body('menus') menus: any[]) {
  await this.baseSysMenuService.import(menus);
    return this.ok();
  }
}
